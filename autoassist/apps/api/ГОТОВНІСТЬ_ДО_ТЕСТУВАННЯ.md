# AutoAssist+ API –ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å –¥–æ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

## ‚úÖ –°—Ç–∞—Ç—É—Å –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ

### üîß **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –°–µ—Ä–≤–µ—Ä–∞**
- ‚úÖ **index.ts** ‚Üí –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–∏–π –≤ **index.legacy.ts**
- ‚úÖ **index.new.ts** ‚Üí –ø–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–∏–π –≤ **index.ts** 
- ‚úÖ –ù–æ–≤–∏–π —Å–µ—Ä–≤–µ—Ä –∑ —É—Å—ñ–º–∞ —Ä–æ—É—Ç–∞–º–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π

### üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ API –ï–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤**

#### **–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è (Orders)**
```
POST /api/orders                  # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
GET  /health                      # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è —Å–µ—Ä–≤–µ—Ä–∞
```

#### **–§–∞–π–ª–∏ (Attachments)**
```
POST /api/attachments/presigned   # –û—Ç—Ä–∏–º–∞—Ç–∏ presigned URL –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
POST /api/attachments/confirm     # –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É
```

#### **–°—Ç—Ä–∞—Ö—É–≤–∞–Ω–Ω—è (Insurance)**
```
POST /api/insurance/generate      # –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó —Å—Ç—Ä–∞—Ö—É–≤–∞–Ω–Ω—è
POST /api/insurance/:id/accept    # –ü—Ä–∏–π–Ω—è—Ç–∏ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—é —Å—Ç—Ä–∞—Ö—É–≤–∞–Ω–Ω—è
```

#### **–ï–≤–∞–∫—É–∞—Ç–æ—Ä (Tow)**
```
POST /api/tow/quote              # –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –≤–∞—Ä—Ç—ñ—Å—Ç—å –µ–≤–∞–∫—É–∞—Ü—ñ—ó
POST /api/tow/:orderId/assign    # –ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ –µ–≤–∞–∫—É–∞—Ç–æ—Ä
```

#### **–ü–ª–∞—Ç–µ–∂—ñ (Payments)**
```
POST /api/payments/invoice       # –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ä–∞—Ö—É–Ω–æ–∫
POST /api/payments/webhook       # Webhook –¥–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –æ–ø–ª–∞—Ç–∏
```

### üìã **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è**

#### **.env —Ñ–∞–π–ª–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ:**
- ‚úÖ `c:\IT\projects\diplom\autoassist\.env` (–∫–æ—Ä–Ω–µ–≤–∏–π)
- ‚úÖ `c:\IT\projects\diplom\autoassist\apps\api\.env` (–¥–ª—è API)

#### **Docker compose:**
- ‚úÖ –§–∞–π–ª –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∏–π (target: "development")
- ‚è≥ –ü–æ–∫–∏ —â–æ –Ω–µ –∑–∞–ø—É—Å–∫–∞—î–º–æ (Docker Desktop –ø–æ—Ç—Ä–µ–±—É—î –∑–∞–ø—É—Å–∫—É)

#### **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö:**
- ‚úÖ Prisma —Å—Ö–µ–º–∞ –∞–¥–∞–ø—Ç–æ–≤–∞–Ω–∞ –¥–ª—è SQLite (–¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)
- ‚úÖ –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ (`npm install`)

### üöÄ **–ì–æ—Ç–æ–≤–æ –¥–ª—è –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**

–ö–æ–ª–∏ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ñ –∑–∞–ø—É—Å–∫–∞—Ç–∏:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ Docker —Å–ª—É–∂–±–∏** (–ë–î, Redis, MinIO):
   ```bash
   cd infra/compose
   docker compose up -d db redis minio
   ```

2. **–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö**:
   ```bash
   cd apps/api
   npx prisma generate
   npx prisma db push
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ API —Å–µ—Ä–≤–µ—Ä**:
   ```bash
   npm run dev
   ```

4. **–¢–µ—Å—Ç—É–≤–∞—Ç–∏ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏** –∑–≥—ñ–¥–Ω–æ –∑ TEST_AUTOASSIST.md

### üéØ **–ö–ª—é—á–æ–≤—ñ –§—É–Ω–∫—Ü—ñ—ó**

- **MinIO Integration**: Presigned URLs –¥–ª—è –ø—Ä—è–º–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
- **Insurance Engine**: –ü—Ä–∞–≤–∏–ª–∞ —Å—Ç—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –±–∞–∑–æ–≤–∞–Ω—ñ –Ω–∞ —Ç–∏–ø—ñ –¢–ó —Ç–∞ –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è—Ö  
- **Tow Calculator**: –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤—ñ–¥—Å—Ç–∞–Ω—ñ —Ç–∞ –≤–∞—Ä—Ç–æ—Å—Ç—ñ –µ–≤–∞–∫—É–∞—Ü—ñ—ó
- **Payment Processing**: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–∞—Ö—É–Ω–∫—ñ–≤ —Ç–∞ webhook –æ–±—Ä–æ–±–∫–∞
- **WebSocket Events**: –†–µ–∞–ª—å–Ω–∏–π —á–∞—Å –¥–ª—è –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
- **Database Persistence**: –í—Å—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —á–µ—Ä–µ–∑ Prisma

### üìù **–ù–∞—Å—Ç—É–ø–Ω—ñ –ö—Ä–æ–∫–∏**

–ö–æ–ª–∏ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ñ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏, –ø—Ä–æ—Å—Ç–æ —Å–∫–∞–∂—ñ—Ç—å - —ñ –º–∏ –∑–∞–ø—É—Å—Ç–∏–º–æ –ø–æ–≤–Ω–∏–π e2e —Ü–∏–∫–ª –∑–≥—ñ–¥–Ω–æ –∑ –≤–∞—à–∏–º —á–µ–∫-–ª–∏—Å—Ç–æ–º!