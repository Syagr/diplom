# AutoAssist+ Platform Monorepo

A comprehensive decentralized insurance-service platform for automotive assistance, combining Web3 technologies, biometric authentication, and gamification, with access via Web only.

## üöÄ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
autoassist/
‚îú‚îÄ apps/
‚îÇ  ‚îú‚îÄ web/                # React (Vite + TypeScript) SPA
‚îÇ  ‚îú‚îÄ api/                # Node.js (Express + Prisma) REST + WebSocket
‚îÇ  
‚îú‚îÄ web3/
‚îÇ  ‚îú‚îÄ contracts/          # Solidity (Hardhat) + NFT-–ø–∞—Å–ø–æ—Ä—Ç + –ø–ª–∞—Ç–µ–∂–∏
‚îÇ  ‚îî‚îÄ sdk/                # JS SDK –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Web3
‚îú‚îÄ packages/
‚îÇ  ‚îú‚îÄ shared/             # –û–±—â–∏–µ TypeScript —Ç–∏–ø—ã –∏ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ  ‚îî‚îÄ config/             # –û–±—â–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏ (eslint, tsconfig, prettier)
‚îú‚îÄ infra/
‚îÇ  ‚îú‚îÄ docker/             # Dockerfiles
‚îÇ  ‚îú‚îÄ compose/            # docker-compose.*.yml
‚îÇ  ‚îî‚îÄ migrations/         # SQL –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
‚îî‚îÄ README.md
```

## üîë –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ–∏—á–∏

### 1. Blockchain / Web3
- **Smart-contract** –¥–ª—è –æ–ø–ª–∞—Ç—ã —Ä–µ–º–æ–Ω—Ç–∞ –∏ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ (Polygon/ETH testnet)
- **NFT-–ø–∞—Å–ø–æ—Ä—Ç –∞–≤—Ç–æ**: –∏—Å—Ç–æ—Ä–∏—è —Ä–µ–º–æ–Ω—Ç–æ–≤, —Å—Ç—Ä–∞—Ö–æ–≤–æ–∫ –∏ —ç–≤–∞–∫—É–∞—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤

### 2. –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è + –¥–æ–≤–µ—Ä–∏–µ
- –ë–∞–ª–ª—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –∑–∞ —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω—É—é –æ–ø–ª–∞—Ç—É –∏ –ø–æ–∫—É–ø–∫—É —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏
- Achievement board: "5 –ª–µ—Ç –±–µ–∑ –î–¢–ü", "–¢–û –≤–æ–≤—Ä–µ–º—è 3 —Ä–∞–∑–∞ –ø–æ–¥—Ä—è–¥"
- –†–µ–π—Ç–∏–Ω–≥ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤

### 3. –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ö–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
- –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª–æ–º–æ–∫ + —Å—Ç–∏–ª—è –µ–∑–¥—ã (—Ç–µ–ª–µ–º–∞—Ç–∏–∫–∞/OBD-II)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∏—Å–∫–æ–≤

### 4. –ë–∏–æ–º–µ—Ç—Ä–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Face ID / WebAuthn
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–¥–∞—á–∏ –∞–≤—Ç–æ: QR-–∫–æ–¥ + —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª–∏—Ü–∞

### 5. –£–º–Ω—ã–π –ø—Ä–∞–π—Å–∏–Ω–≥ –∑–∞–ø—á–∞—Å—Ç–µ–π
- –ü–æ–¥–±–æ—Ä –¥–µ—Ç–∞–ª–µ–π —á–µ—Ä–µ–∑ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã (API –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤)
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã: "–æ—Ä–∏–≥–∏–Ω–∞–ª" vs "–∞–Ω–∞–ª–æ–≥ –¥–µ—à–µ–≤–ª–µ"

## üì≤ –ö–∞–Ω–∞–ª—ã

- **Web**: –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å Web3-–ø–ª–∞—Ç–µ–∂–∞–º–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º

## üõ†Ô∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Node.js 20+ –∏ –≤–∫–ª—é—á–µ–Ω corepack
corepack enable
pnpm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Å–æ–≥–ª–∞—Å–Ω–æ –≤–∞—à–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
```

### 3. –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```bash
# –ü–æ–¥–Ω–∏–º–∞–µ—Ç PostgreSQL, Redis, MinIO
pnpm start:infra
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma –∫–ª–∏–µ–Ω—Ç–∞ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã
pnpm db:generate
pnpm db:push
```

### 5. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
# –ó–∞–ø—É—Å–∫–∞–µ—Ç API –∏ Web –≤ dev —Ä–µ–∂–∏–º–µ
pnpm dev
```

## üåê –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

- **Web**: http://localhost:5173
- **API**: http://localhost:8080/health
- **MinIO S3 API**: http://localhost:12002
- **MinIO Console**: http://localhost:12003 (minioadmin/minioadmin123)
- **Prometheus**: http://localhost:19091
- **Loki**: http://localhost:3100

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≤ Docker Compose —Ç–∞–∫–∂–µ –ø–æ–¥–Ω–∏–º–∞—é—Ç—Å—è —Å–µ—Ä–≤–∏—Å—ã `api` –∏ `web`. SPA –æ—Ç–¥–∞—ë—Ç—Å—è nginx –Ω–∞ 5173 –∏ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç `/api` –∏ `/socket.io` –Ω–∞ API –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: SIWE (EIP-4361)

- –≠–Ω–¥–ø–æ–∏–Ω—Ç: `POST /api/wallet/verify`
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∞:
	- –ü—Ä–æ—Å—Ç–æ–π: `{ address, signature }` (–ø–æ–¥–ø–∏—Å—å nonce)
	- SIWE: `{ siweMessage, signature }` (–∫–∞–Ω–æ–Ω–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ EIP-4361)
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –æ–∂–∏–¥–∞–Ω–∏–π:
	- `EXPECTED_SIWE_DOMAIN` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `localhost`)
	- `EXPECTED_SIWE_URI_PREFIX` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `http://localhost`)
	- `EXPECTED_SIWE_CHAIN_ID` (–Ω–∞–ø—Ä–∏–º–µ—Ä `80002` –¥–ª—è Polygon Amoy)
- –û—Ç–≤–µ—Ç: –ø–∞—Ä–∞ —Ç–æ–∫–µ–Ω–æ–≤ `{ access, refresh }`.

–ü—Ä–∏–º–µ—Ä SIWE-—Å–æ–æ–±—â–µ–Ω–∏—è –∏ —Å—Ö–µ–º—ã –∑–∞–ø—Ä–æ—Å–∞/–æ—Ç–≤–µ—Ç–∞ –æ–ø–∏—Å–∞–Ω—ã –≤ `apps/api/src/openapi.json`.

–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:

1) –ü—Ä–æ—Å—Ç–æ–π (nonce-–ø–æ–¥–ø–∏—Å—å)

```json
{
	"address": "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
	"signature": "0xabcdef...",
	"chainId": 80002
}
```

2) SIWE

```json
{
	"siweMessage": "localhost wants you to sign in with your Ethereum account:\n0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48\n\nURI: http://localhost/login\nVersion: 1\nChain ID: 80002\nNonce: 0x53c1f2d7a1\nIssued At: 2025-10-22T10:00:00Z",
	"signature": "0xdeadbeef..."
}
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **Backend**: Node.js (Express/Prisma), PostgreSQL, Redis
- **Frontend**: React (Vite), TypeScript, Socket.IO
- **Web3**: Hardhat, Polygon testnet, ethers.js
- **DevOps**: Docker Compose, pnpm workspace

## üìã –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```bash
pnpm db:migrate     # –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
pnpm db:push        # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã
```

### –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏
```bash
pnpm contracts:compile  # –ö–æ–º–ø–∏–ª—è—Ü–∏—è Solidity
pnpm contracts:test     # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
pnpm contracts:deploy   # –î–µ–ø–ª–æ–π –≤ testnet
```

### –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
pnpm lint      # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤
pnpm format    # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Web3**: —Å–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –≤ Infura –¥–ª—è Polygon
2. **–î–æ–±–∞–≤—å—Ç–µ –¥–µ—Ç–∞–ª–∏**: —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è attachment, insurance offers, tow requests

---

**AutoAssist+** ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ CRM, –∞ InsurTech Web3-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å–∞ —Å –¥–æ–≤–µ—Ä–∏–µ–º, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é –∏ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–µ–π! üöó‚õìÔ∏è‚ú®